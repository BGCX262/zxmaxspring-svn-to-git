/*C143*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
alter table user_role drop constraint FK143BF46A608D2196
alter table user_role drop constraint FK143BF46ABB625DB6
drop table app_user if exists
drop table role if exists
drop table user_role if exists
create table app_user (id bigint generated by default as identity (start with 1), account_expired bit not null, account_locked bit not null, address varchar(150), city varchar(50) not null, country varchar(100), postal_code varchar(15) not null, province varchar(100), credentials_expired bit not null, email varchar(255) not null, account_enabled bit, first_name varchar(50) not null, last_name varchar(50) not null, password varchar(255) not null, password_hint varchar(255), phone_number varchar(255), username varchar(50) not null, version integer, website varchar(255), primary key (id), unique (email), unique (username))
create table role (id bigint generated by default as identity (start with 1), description varchar(64), name varchar(20), primary key (id))
create table user_role (user_id bigint not null, role_id bigint not null, primary key (user_id, role_id))
alter table user_role add constraint FK143BF46A608D2196 foreign key (user_id) references app_user
alter table user_role add constraint FK143BF46ABB625DB6 foreign key (role_id) references role
DISCONNECT
/*C144*/SET SCHEMA PUBLIC
CONNECT USER SA
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','User','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','','user',1,'http://tomcat.apache.org')
INSERT INTO APP_USER VALUES(-2,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt@raibledesigns.com',TRUE,'Matt','Raible','d033e22ae348aeb5660fc2140aec35850c4da997','Not a female kitty.','','admin',1,'http://raibledesigns.com')
INSERT INTO ROLE VALUES(-1,'Administrator role (can edit Users)','ROLE_ADMIN')
INSERT INTO ROLE VALUES(-2,'Default role for all Users','ROLE_USER')
INSERT INTO USER_ROLE VALUES(-1,-2)
INSERT INTO USER_ROLE VALUES(-2,-1)
DISCONNECT
/*C145*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C146*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C147*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C148*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DELETE FROM ROLE WHERE ID=-2
INSERT INTO ROLE VALUES(-2,'test descr','ROLE_USER')
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C149*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO ROLE VALUES(1,'new role descr','testrole')
DELETE FROM ROLE WHERE ID=1
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C150*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C151*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C152*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C153*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C154*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C155*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C156*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DELETE FROM APP_USER WHERE ID=-1
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'new address','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','User','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','','user',2,'http://tomcat.apache.org')
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C157*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C158*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
DELETE FROM APP_USER WHERE ID=-1
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','User','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','','user',2,'http://tomcat.apache.org')
INSERT INTO USER_ROLE VALUES(-1,-1)
DELETE FROM APP_USER WHERE ID=-1
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','User','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','','user',3,'http://tomcat.apache.org')
DELETE FROM USER_ROLE WHERE USER_ID=-1 AND ROLE_ID=-1
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C159*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO APP_USER VALUES(2,FALSE,FALSE,NULL,'Denver','USA','80210','CO',FALSE,'testuser@appfuse.org',FALSE,'Test','Last','testpass',NULL,NULL,'testuser',0,'http://raibledesigns.com')
INSERT INTO USER_ROLE VALUES(2,-2)
DELETE FROM USER_ROLE WHERE USER_ID=2 AND ROLE_ID=-2
DELETE FROM APP_USER WHERE ID=2
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C160*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C161*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C162*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C163*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C164*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C165*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C166*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C167*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C168*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C167*/SET AUTOCOMMIT TRUE
DISCONNECT
/*C169*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C170*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO APP_USER VALUES(4,FALSE,FALSE,'23 16th Street','Denver','USA','80210','CO',FALSE,'junk@raibledesigns.com',FALSE,'John','Elway','7334ce7ff7d6fa1cc7b6cf7f8a0588fe7ecd5d4a',NULL,NULL,'john',0,NULL)
INSERT INTO USER_ROLE VALUES(4,-2)
DELETE FROM USER_ROLE WHERE USER_ID=4 AND ROLE_ID=-2
DELETE FROM APP_USER WHERE ID=4
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C171*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C172*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C171*/DELETE FROM APP_USER WHERE ID=-1
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','User','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','303-555-1212','user',2,'http://tomcat.apache.org')
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C173*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO APP_USER VALUES(5,FALSE,FALSE,NULL,'Denver',NULL,'80465',NULL,FALSE,'foo@bar.com',FALSE,'first','last','bar',NULL,NULL,'foo',0,NULL)
DELETE FROM APP_USER WHERE ID=5
INSERT INTO APP_USER VALUES(5,FALSE,FALSE,NULL,'Denver','USA','80465',NULL,FALSE,'foo@bar.com',FALSE,'first','last','bar',NULL,NULL,'foo',1,NULL)
DELETE FROM APP_USER WHERE ID=5
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C174*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C175*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
INSERT INTO APP_USER VALUES(6,FALSE,FALSE,NULL,'Denver','USA','80210','Colorado',FALSE,'self-registered@raibledesigns.com',TRUE,'First','Last','70ccd9007338d6d81dd3b6271621b9cf9a97ea00','Password is one with you.',NULL,'self-registered',0,'http://raibledesigns.com')
INSERT INTO USER_ROLE VALUES(6,-2)
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C176*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C177*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C178*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C179*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C180*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C181*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C182*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C183*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
/*C184*/SET SCHEMA PUBLIC
CONNECT USER SA
DISCONNECT
/*C183*/DELETE FROM APP_USER WHERE ID=-1
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','Updated Last Name','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','','user',2,'http://tomcat.apache.org')
ROLLBACK
SET AUTOCOMMIT TRUE
DISCONNECT
/*C185*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C186*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C187*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
SET AUTOCOMMIT TRUE
DISCONNECT
/*C188*/SET SCHEMA PUBLIC
CONNECT USER SA
DELETE FROM USER_ROLE WHERE USER_ID=-2 AND ROLE_ID=-1
DELETE FROM USER_ROLE WHERE USER_ID=-1 AND ROLE_ID=-2
DELETE FROM ROLE WHERE ID=-2
DELETE FROM ROLE WHERE ID=-1
DELETE FROM APP_USER WHERE ID=-2
DELETE FROM APP_USER WHERE ID=-1
INSERT INTO APP_USER VALUES(-1,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt_raible@yahoo.com',TRUE,'Tomcat','User','12dea96fec20593566ab75692c9949596833adc9','A male kitty.','','user',1,'http://tomcat.apache.org')
INSERT INTO APP_USER VALUES(-2,FALSE,FALSE,'','Denver','US','80210','CO',FALSE,'matt@raibledesigns.com',TRUE,'Matt','Raible','d033e22ae348aeb5660fc2140aec35850c4da997','Not a female kitty.','','admin',1,'http://raibledesigns.com')
INSERT INTO ROLE VALUES(-1,'Administrator role (can edit Users)','ROLE_ADMIN')
INSERT INTO ROLE VALUES(-2,'Default role for all Users','ROLE_USER')
INSERT INTO USER_ROLE VALUES(-1,-2)
INSERT INTO USER_ROLE VALUES(-2,-1)
DISCONNECT
